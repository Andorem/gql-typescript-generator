import * as fs from "fs";

const entities = [{{#each modules}}"{{name}}",{{/each}}];
const mainSchema = `${__dirname}/../schema.graphql`;
const allSchemas = entities
.map(
(eName) => `${__dirname}/../../modules/${eName}/graphQL/${eName}.graphql`
)
.concat(mainSchema);

// eslint-disable-next-line import/no-mutable-exports
let allContents = "type Query { healthcheck: String }";

allSchemas.forEach((schema) => {
const content = fs.readFileSync(schema, {
encoding: "utf8",
});
allContents += content;
});

allContents = allContents
.replace(/type Query {}/g, "")
.replace(/type Mutation {}/g, "")
.replace(/extend type Query/g, "type Query")
.replace(/extend type Mutation/g, "type Mutation");

export default allContents;
